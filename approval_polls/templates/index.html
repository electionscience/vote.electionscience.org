{% extends 'base.html' %}
{% block content %}
    <div class="wide container">
        {% if latest_poll_list %}
            <div class="two-col-row">
                <div class="leftCol">
                    <div class="description">
                        <h1>vote.electionscience.org</h1>
                    </div>
                    <p>
                        With <a href="https://www.electionscience.org/approval-voting">Approval Voting</a> voters can choose as many candidates
                        as they like, and the one receiving the most votes wins.
                    </p>
                    <p>
                        This site allows you to <a href="{% url 'create' %}">create your own approval voting election</a> and see how voters express their preferences when they can choose multiple candidates.
                    </p>
                    <p>
                        <strong>vote.electionscience.org</strong> is a project of
                        <a href="https://www.electionscience.org">The Center for Election Science</a>.
                    </p>
                    <p>
                        For more information, see
                        <a href="https://www.electionscience.org/approval-voting">approval voting</a> or
                        <a href="{% url 'create' %}">create your own election</a>.
                    </p>
                </div>
                <div class="rightCol">
                    {% if tag %}
                        <div class="electionHeader">
                            <h2>Tag: {{ tag.tag_text }}</h2>
                        </div>
                    {% else %}
                        <div class="electionHeader">
                            <h2>My Elections</h2>
                            <a href="{% url 'create' %}"
                               class="create-election-btn"
                               title="Create new election">+</a>
                        </div>
                    {% endif %}
                    {% for poll in latest_poll_list %}
                        <div class="race">
                            <a href="{% url 'detail' poll.id %}">
                                <div class="race-content">
                                    <div class="title">
                                        <strong>{{ poll.question }}</strong>
                                    </div>
                                    <div class="meta">
                                        <strong>{{ poll.total_ballots }}</strong> ballot{{ poll.total_ballots|pluralize }}
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                    {% if latest_poll_list.has_previous or latest_poll_list.has_next %}
                        <div class="mt-4">
                            {% if latest_poll_list.has_previous %}
                                <a href="?page={{ latest_poll_list.previous_page_number }}">« Previous</a>
                            {% endif %}
                            {% if latest_poll_list.has_previous and latest_poll_list.has_next %}|{% endif %}
                            {% if latest_poll_list.has_next %}<a href="?page={{ latest_poll_list.next_page_number }}">Next »</a>{% endif %}
                        </div>
                    {% endif %}
                </div>
            </div>
        {% else %}
            <div class="container">
                {% if user.is_authenticated %}
                    <p>You haven't created any elections yet.</p>
                    <p>
                        <a href="{% url 'create' %}">Create your first election</a>.
                    </p>
                {% else %}
                    <p>
                        Please <a href="{% url 'account_login' %}">log in</a> to view your elections.
                    </p>
                {% endif %}
            </div>
        {% endif %}
    </div>
{% endblock content %}
