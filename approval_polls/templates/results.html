{% extends 'base.html' %}
{% load filters %}
{% block content %}
<div class="container">
    <h1>{{ poll.question }}</h1>
    <p>Total Ballots: {{ poll.total_ballots }}</p>

    <div class="choices">
        {% for choice in choices %}
            <div class="choice {% if choice in leading_choices %}border-success{% endif %}">
                <h3>
                    {{ choice.choice_text }}
                    {% if choice in leading_choices %}
                        <span class="badge bg-success">Leading</span>
                    {% endif %}
                </h3>
                <p>
                    Approval Votes: {{ choice.vote_count }}
                    ({{ choice.vote_count|divisibleby:poll.total_ballots|floatformat:2 }}%)
                    <br>
                    Proportional Votes: {{ choice.proportional_votes|floatformat:2 }}
                    ({{ choice.proportional_percentage|floatformat:2 }}%)
                </p>
                <div class="progress">
                    <!-- Approval Votes Progress Bar -->
                    <div class="progress-bar bg-primary"
                         role="progressbar"
                         style="width: {{ choice.vote_count|divisibleby:poll.total_ballots|floatformat:2 }}%;">
                        Approval: {{ choice.vote_count|divisibleby:poll.total_ballots|floatformat:2 }}%
                    </div>

                    <!-- Proportional Votes Progress Bar -->
                    <div class="progress-bar bg-secondary"
                         role="progressbar"
                         style="width: {{ choice.proportional_percentage|floatformat:2 }}%;">
                        Proportional: {{ choice.proportional_percentage|floatformat:2 }}%
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}